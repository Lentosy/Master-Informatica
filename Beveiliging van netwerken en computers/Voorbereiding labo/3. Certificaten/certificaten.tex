\documentclass{report}

\usepackage{ugentstyle}
\usepackage{listings}

\begin{document}
	\maketitle{Voorbereiding Labo Certificaten}
	\tableofcontents
	
	\chapter{Vragen}
	\begin{itemize}
		\item \textbf{Wat is de functie van een certificaat?} Een certificaat bevat informatie over de eigenaar van dit certificaat zoals e-mailadres, naam, geldigheidsdatum. Ook bevat het een publieke sleutel en een hashwaarde om na te gaan of dit certificaat niet gewijzigd werd. Het doel van zo een certificaat is om na te gaan of dat een website waarop iemand zich bevindt, wel degelijk de site is dat hij verwacht dat het is. Een certificaat wordt getekend door een erkende partij (Certificate Authority). De CA heeft een lijst van alle getekende en verworpen certificaten. Certificaten die nog niet getekend zijn, worden als onveilig beschouwd aangezien die nog aangepast kunnen worden. Een getekend certificaat kan niet aangepast worden. 
		
		\item \textbf{Welke stappen moet je volgen om een certificaat aan te vragen, indien het subject een server-programma is?} De server moet een \textbf{Certificate Sign Request (CSR)} genereren dat ondertekend moet worden door een CA. Een CSR bevat onder andere de publieke sleutel en identiteitsinformatie (zoals domainnaam). Vooraleer een server zo een CSR kan aanmaken, moet hij eerst een sleutelpaar genereren. De server moet zijn CSR ondertekenen met zijn geheime sleutel. 
	\end{itemize}
	
	
	\chapter{OpenSSL}
	\textbf{OpenSSL} is een library dat onder andere gebruikt wordt door openSSH.
	
	\section{Opties}
	Elk openssl commando wordt gevolgd door een sleutelwoord. Een sleutelwoord kan dan gevolgd worden door eventuele opties, specifiek voor dat sleutelwoord. Een overzicht van de belangrijkste sleutelwoorden zijn:
	\begin{itemize}
		\item \textbf{req\qquad} Dit sleutelwoord zal een aanvraag sturen om een certificaat te ondertekenen. Eventuele opties zijn:
			\begin{itemize}
				\item[] \textbf{-x509} Deze optie zal een zelf getekend certificaat (self signed certificate) geven in plaats van het te vragen aan een erkende partij. Dit wordt typisch gebruikt voor testcertificaten. 
				\item[] \textbf{-nodes} Bij deze optie zal de geheime sleutel niet geÃ«ncrypteerd worden.
				\item[] \textbf{-days n} In combinatie met de \textbf{-x509} optie, zal deze optie het certificaat voor \textbf{n} dagen geldig houden. De defaultwaarde voor \textbf{n} is 30.
				\item[] \textbf{-newkey arg} Deze optie zal een nieuwe geheime sleutel genereren alsook een nieuwe certificaataanvraag starten. Het argument kan drie vormen aannemen:
				\begin{itemize}
					\item \textbf{rsa:nbits} Dit genereert een \textbf{RSA} sleutel van grootte \textbf{nbits}. Indien nbits weggelaten wordt, zal de defaultwaarde genomen worden van het configuratiebestand.
					\item \textbf{param:file} Dit zal een sleutel genereren met een parameter- of certificaatbestand. Het algoritme wordt bepaald door de parameters in dit bestand.
					\item \textbf{[dsa\textbar ec\textbar gost2001]:filename} zal respectievelijk een \textbf{DSA}, \textbf{EC} of een \textbf{GOST} sleutel genereren, gebruik makend van de parameters in het bestand \textbf{filename}. 
				\end{itemize}
				\item[] \textbf{-keyout filename} Deze optie specifieert het bestand waar de geheime sleutel naartoe moet geschreven worden. 
				\item[] \textbf{-out filename} Deze optie specifieert naarwaar de output van het commando moet geschreven worden.
				\item[] \textbf{-verify} Verificatie van de handtekening van de aanvraag.
				\item[] \textbf{-text} Zal de aanvraag in textformaat uitprinten
			\end{itemize}
		Voorbeelden van het gebruik van \textbf{req}:
		\begin{itemize}
			\item \textbf{Controle en verificatie certificaat aanvraag}
			\begin{lstlisting}
openssl req -in req.pem -text -verify -noout
			\end{lstlisting}
			\item \textbf{Geheime sleutel aanmaken en daarna deze gebruiken voor een nieuwe certificaataanvraag}
			\begin{lstlisting}
openssl req -newkey rsa:1024 -keyout key.pem -out req.pem
			\end{lstlisting}
			\item \textbf{Genereren van een self signed root certificaat}
			\begin{lstlisting}
openssl req -x509 -newkey rsa:1024 -keyout key.pem -out req.pem
			\end{lstlisting}
		\end{itemize}
	
	\item \textbf{genrsa\qquad} Dit sleutelwoord kan als vervanging van \textbf{req -newkey rsa:nbits} dienen.
			Voorbeelden van het gebruik van \textbf{genrsa}:
	\begin{itemize}
		\item \textbf{Geheime sleutel aanmaken en daarna deze gebruiken voor een nieuwe certificaataanvraag}
		\begin{lstlisting}
openssl genrsa -out key.pem 1024
openssl req -new -key key.pem -out req.pem
		\end{lstlisting}
	\end{itemize}
\end{itemize}

\end{document}
